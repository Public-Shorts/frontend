const a={film:"#857f7a","meta-category":"#ff7411",cluster:"#8b5cf6",screening:"#eab308"};function m(i,l=.15){if(i.startsWith("rgb")){const t=i.match(/(\d+)/g);if(t){const[c,n,o]=t.map(Number);return`rgba(${c},${n},${o},${l})`}}const r=parseInt(i.slice(1,3),16),s=parseInt(i.slice(3,5),16),e=parseInt(i.slice(5,7),16);return`rgba(${r},${s},${e},${l})`}function d(i){const l=[],r=[],s=new Set;l.push({id:i.currentFilmId,type:"film",label:i.currentFilmTitle,val:4,color:a.film,active:!0,visible:!0,data:{_id:i.currentFilmId,englishTitle:i.currentFilmTitle,slug:i.currentFilmSlug}}),s.add(i.currentFilmId);for(const e of i.neighborFilms)s.has(e._id)||(s.add(e._id),l.push({id:e._id,type:"film",label:e.englishTitle,val:2,color:a.film,active:!1,visible:!0,data:e}));for(const e of i.metaCategories){l.push({id:`mc-${e._id}`,type:"meta-category",label:e.name,val:4,color:a["meta-category"],active:!0,visible:!0,data:{_id:e._id,name:e.name,filmCount:e.filmIds.length}});for(const t of e.filmIds)s.has(t)&&r.push({source:t,target:`mc-${e._id}`,type:"film-meta"})}for(const e of i.clusters){l.push({id:`cl-${e._id}`,type:"cluster",label:e.name,val:4,color:a.cluster,active:!0,visible:!0,data:{_id:e._id,name:e.name,filmCount:e.filmIds.length}});for(const t of e.filmIds)s.has(t)&&r.push({source:t,target:`cl-${e._id}`,type:"film-cluster"})}for(const e of i.screenings){l.push({id:`sc-${e._id}`,type:"screening",label:e.name,val:4,color:a.screening,active:!0,visible:!0,data:{_id:e._id,name:e.name,filmCount:e.filmIds.length}});for(const t of e.filmIds)s.has(t)&&r.push({source:t,target:`sc-${e._id}`,type:"film-screening"})}return{nodes:l,links:r,activeFilmIds:new Set([i.currentFilmId])}}export{d as b,m as d};
